{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\luisa\\\\OneDrive\\\\Documentos\\\\LUIS INSTITUTO\\\\3 A\\xD1O\\\\programacion 3\\\\app_copa\\\\front\\\\src\\\\pages\\\\Login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Button, TextField, Typography, CircularProgress } from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const navigate = useNavigate();\n  const handleSubmit = event => {\n    event.preventDefault();\n\n    // Validación de campos\n    if (!username.trim() || !password.trim()) {\n      setErrorMessage('Por favor, ingrese nombre de usuario y contraseña.');\n      return;\n    }\n    setIsLoading(true);\n    fetch('http://localhost:3001/api/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username: username.trim(),\n        password: password.trim()\n      })\n    }).then(response => {\n      setIsLoading(false);\n      if (response.ok) {\n        return response.json();\n      } else if (response.status === 401) {\n        throw new Error('Credenciales incorrectas');\n      } else {\n        throw new Error('Error del servidor');\n      }\n    }).then(data => {\n      localStorage.setItem('token', data.token);\n      localStorage.setItem('username', username.trim());\n      console.log('Login exitoso: ', {\n        token: data.token,\n        username: username.trim()\n      }); // Agregar logs para verificación\n      navigate('/home');\n    }).catch(error => {\n      console.error(error);\n      setErrorMessage(error.message);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      gutterBottom: true,\n      children: \"Iniciar sesi\\xF3n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Nombre de usuario\",\n        value: username,\n        onChange: e => setUsername(e.target.value),\n        fullWidth: true,\n        margin: \"normal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        label: \"Contrase\\xF1a\",\n        type: \"password\",\n        value: password,\n        onChange: e => setPassword(e.target.value),\n        fullWidth: true,\n        margin: \"normal\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          marginTop: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          variant: \"contained\",\n          color: \"primary\",\n          style: {\n            width: '48%'\n          },\n          disabled: isLoading,\n          children: isLoading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 26\n          }, this) : 'Iniciar sesión'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"secondary\",\n          style: {\n            width: '48%'\n          },\n          onClick: () => navigate('/register'),\n          children: \"Registrarse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), errorMessage && /*#__PURE__*/_jsxDEV(Typography, {\n      color: \"error\",\n      style: {\n        marginTop: '10px'\n      },\n      children: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 24\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"Dn7nVsYIxtbw1MhLLkahcpIoBcU=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","Button","TextField","Typography","CircularProgress","useNavigate","jsxDEV","_jsxDEV","Login","_s","username","setUsername","password","setPassword","errorMessage","setErrorMessage","isLoading","setIsLoading","navigate","handleSubmit","event","preventDefault","trim","fetch","method","headers","body","JSON","stringify","then","response","ok","json","status","Error","data","localStorage","setItem","token","console","log","catch","error","message","children","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","label","value","onChange","e","target","fullWidth","margin","type","style","display","justifyContent","marginTop","color","width","disabled","size","onClick","_c","$RefreshReg$"],"sources":["C:/Users/luisa/OneDrive/Documentos/LUIS INSTITUTO/3 AÑO/programacion 3/app_copa/front/src/pages/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Button, TextField, Typography, CircularProgress } from '@mui/material';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Login = () => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    // Validación de campos\r\n    if (!username.trim() || !password.trim()) {\r\n      setErrorMessage('Por favor, ingrese nombre de usuario y contraseña.');\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    fetch('http://localhost:3001/api/login', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ username: username.trim(), password: password.trim() })\r\n    })\r\n    .then(response => {\r\n      setIsLoading(false);\r\n      if (response.ok) {\r\n        return response.json();\r\n      } else if (response.status === 401) {\r\n        throw new Error('Credenciales incorrectas');\r\n      } else {\r\n        throw new Error('Error del servidor');\r\n      }\r\n    })\r\n    .then(data => {\r\n      localStorage.setItem('token', data.token);\r\n      localStorage.setItem('username', username.trim());\r\n      console.log('Login exitoso: ', { token: data.token, username: username.trim() }); // Agregar logs para verificación\r\n      navigate('/home');\r\n    })\r\n    .catch(error => {\r\n      console.error(error);\r\n      setErrorMessage(error.message);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        Iniciar sesión\r\n      </Typography>\r\n      <form onSubmit={handleSubmit}>\r\n        <TextField\r\n          label=\"Nombre de usuario\"\r\n          value={username}\r\n          onChange={(e) => setUsername(e.target.value)}\r\n          fullWidth\r\n          margin=\"normal\"\r\n        />\r\n        <TextField\r\n          label=\"Contraseña\"\r\n          type=\"password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          fullWidth\r\n          margin=\"normal\"\r\n        />\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: '20px' }}>\r\n          <Button type=\"submit\" variant=\"contained\" color=\"primary\" style={{ width: '48%' }} disabled={isLoading}>\r\n            {isLoading ? <CircularProgress size={24} /> : 'Iniciar sesión'}\r\n          </Button>\r\n          <Button variant=\"contained\" color=\"secondary\" style={{ width: '48%' }} onClick={() => navigate('/register')}>\r\n            Registrarse\r\n          </Button>\r\n        </div>\r\n      </form>\r\n      {errorMessage && <Typography color=\"error\" style={{ marginTop: '10px' }}>{errorMessage}</Typography>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}